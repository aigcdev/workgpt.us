import{_ as P}from"./layout.c27dae6b.js";import{F as c}from"./fingerprint2.00958719.js";import{n as k,H as x,w as R,o as j,a as t,d as u}from"./entry.f812b8d3.js";import"./_commonjsHelpers.725317a4.js";const C={class:"container"},E=t("div",{class:"main-title"},[t("h1",null,"Your Telegram reply bot"),t("div",null," Delegate your Telegram account to GPT, reply message automatically on your behalf. ")],-1),U={class:"try"},q=t("div",{class:"sub-title"},[t("h2",null,"Try it now"),t("div",null," Test it with this ready-to-use GPT Assistant and see how it works. ")],-1),G={class:"step"},O=t("div",{class:"title"},"Step 1",-1),A=t("div",{class:"desc"},"Change your reply bot instruction.",-1),B=t("textarea",{id:"prompt",rows:"6",cols:"80",style:{"margin-bottom":"12px"}},null,-1),I=t("div",{class:"desc"},"Or select one from the GPTs.",-1),D=t("div",{class:"step"},[t("div",{class:"title"},"Step 2"),t("div",{class:"desc"},[u(" Send a message to the Telegram id "),t("a",{href:"https://t.me/telegpt001"},"telegpt001 "),u(". It will automatically answer your messages following the above instruction. ")])],-1),$={class:"create"},J=t("div",{class:"sub-title"},[t("h2",null,"Create your own GPT Assistant"),t("div",null," Submit your telegram number and instruction to GPT. ")],-1),L={class:"form"},F=t("div",{class:"field"},[t("div",{class:"title"},"Telegram Number*"),t("input",{id:"telegramNumberInput",type:"text"})],-1),M=t("div",{class:"field"},[t("div",{class:"title"}," Instruction to your GPT Assistant* "),t("textarea",{id:"customPromptTextarea",rows:"6"})],-1),V={class:"field custom-operation submit",style:{"text-align":"center"}},H=t("div",{class:"field tips"},[t("div",{class:"success"}," We will contact you as soon as possible. "),t("div",{class:"pending"},"Processing payment"),t("div",{class:"fail",style:{color:"red"}}," Payment failed ")],-1),a="https://api.workgpt.us",d="example",X={__name:"telegpt",setup(W){const p=()=>{y(),h(),m(),g()},m=async()=>{const s=_("orderNo");if(!s)return;const e=await S(s);if(e.telNumber){const o=document.querySelector("#telegramNumberInput");o.value=e.telNumber,e.payStatus!==-1&&(o.disabled=!0,document.querySelector(".custom-operation").className="field custom-operation update");const r=await i(e.telNumber);document.querySelector("#customPromptTextarea").value=r.prompt}document.querySelector(".field.tips").className="field tips "+(e.payStatus===0?"pending":e.payStatus===-1?"fail":"success")},y=async()=>{const s=await i(d);document.querySelector("#prompt").value=s.prompt},h=async()=>{const s=await f();document.querySelector("#demoPromptSelect").innerHTML=s.reduce((e,o)=>(e+=`
                        <option value="${o.prompt}">${o.name}</option>
                    `,e),'<option value="">Select A GPT</option>')},g=async()=>{await fetch(a+"/api/records",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"telegpts",code:"open",ext1:await w()})})},w=async()=>{const e=(await c.getPromise()).map(o=>o.value);return c.x64hash128(e.join(""),31)},_=s=>{const e=new RegExp("(^|&)"+s+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e);return o!=null?unescape(o[2]):null},f=async()=>{const e=await(await fetch(a+"/api/tel_agents",{method:"GET"})).json();return e.code!==200?(alert("Network error, please try again."),Promise.reject(new Error("Network error, please try again."))):e.data},v=async(s,e)=>{if((await(await fetch(a+"/api/tel_agents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telNumber:s,prompt:e})})).json()).code!==200)return alert("Network error, please try again."),Promise.reject(new Error("Network error, please try again."))},n=async(s,e)=>{(await(await fetch(a+"/api/tel_agents/"+s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})})).json()).code===200?alert("Update Successfully!"):alert("Network error, please try again.")},i=async s=>{const o=await(await fetch(a+"/api/tel_agents/"+s,{method:"GET"})).json();return o.code!==200?(alert("Network error, please try again."),Promise.reject(new Error("Network error, please try again."))):o.data},b=async s=>{const o=await(await fetch(a+"/api/tel_subs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telNumber:s,backUrl:window.location.origin+window.location.pathname})})).json();if(o.code!==200)return alert("Network error, please try again."),Promise.reject(new Error("Network error, please try again."));window.open(o.data.url)},S=async s=>{const o=await(await fetch(a+"/api/tel_subs/"+s,{method:"GET"})).json();return o.code!==200?(alert("Network error, please try again."),Promise.reject(new Error("Network error, please try again."))):o.data},T=async()=>{const s=document.querySelector("#prompt").value;await n(d,s)},l=async(s=!1)=>{const e=document.querySelector("#telegramNumberInput").value,o=document.querySelector("#customPromptTextarea").value;if(!e){alert("Please enter telegram number.");return}if(!o){alert("Please enter instruction.");return}s?await n(e,o):(await v(e,o),await b(e))},N=s=>{s.target.value&&(document.querySelector("#prompt").value=s.target.value)};return k(()=>{p()}),(s,e)=>{const o=P;return j(),x(o,null,{default:R(()=>[t("div",null,[t("div",C,[E,t("div",U,[q,t("div",G,[O,A,B,I,t("select",{id:"demoPromptSelect",onChange:N},null,32),t("div",{style:{"text-align":"center"}},[t("button",{onClick:T}," Update ")])]),D]),t("div",$,[J,t("div",L,[F,M,t("div",V,[t("button",{id:"customSubmitButton",onClick:e[0]||(e[0]=r=>l(!1))}," Submit "),t("button",{id:"customUpdateButton",onClick:e[1]||(e[1]=r=>l(!0))}," Update ")]),H])])])])]),_:1})}}};export{X as default};
